//A little popup allowing the user to encode and decode in several common web encodings
javascript:(function() {  var view = document.createElement('div');  view.style = 'position: fixed; top: 10px; right: 10px; width: 300px; background: #f0f0f0; border: 1px solid #ccc; padding: 20px; font-family: Arial, sans-serif; box-sizing: border-box; z-index: 9999;';  var closeButton = document.createElement('button');  closeButton.innerText = 'Close';  closeButton.style = 'position: absolute; top: 10px; right: 10px; font-size: 16px; background-color: #ff4b5c; color: white; border: none; padding: 5px 10px; cursor: pointer;';  closeButton.onclick = function() { document.body.removeChild(view); };  view.appendChild(closeButton);  var input = document.createElement('textarea');  input.style = 'width: 100%; height: 100px; margin-bottom: 10px;';  view.appendChild(input);  var output = document.createElement('textarea');  output.style = 'width: 100%; height: 100px; margin-bottom: 10px;';  view.appendChild(output);  var select = document.createElement('select');  select.style = 'width: 100%; margin-bottom: 10px;';  var options = [    {text: 'Encode Base64', action: 'encodeBase64'},    {text: 'Decode Base64', action: 'decodeBase64'},    {text: 'Encode URI', action: 'encodeURI'},    {text: 'Decode URI', action: 'decodeURI'},    {text: 'Encode HTML Entities (Number)', action: 'encodeHTMLEntities'},    {text: 'Decode HTML Entities (Number)', action: 'decodeHTMLEntities'},    {text: 'Encode HTML Entities (Named)', action: 'encodeHTMLNamedEntities'},    {text: 'Decode HTML Entities (Named)', action: 'decodeHTMLNamedEntities'}  ];  options.forEach(function(option) {    var opt = document.createElement('option');    opt.value = option.action;    opt.innerText = option.text;    select.appendChild(opt);  });  view.appendChild(select);  var checkbox = document.createElement('input');  checkbox.type = 'checkbox';  checkbox.id = 'double-encode';  view.appendChild(checkbox);  var label = document.createElement('label');  label.htmlFor = 'double-encode';  label.innerText = ' Double Encode/Decode';  view.appendChild(label);  var applyButton = document.createElement('button');  applyButton.innerText = 'Apply';  applyButton.style = 'width: 100%;';  applyButton.onclick = function() {    var value = input.value;    var action = select.value;    var doubleEncode = checkbox.checked;    function applyAction(value, action) {      if(action === 'encodeBase64') return btoa(value);      if(action === 'decodeBase64') return atob(value);      if(action === 'encodeURI') return encodeURIComponent(value);      if(action === 'decodeURI') return decodeURIComponent(value);      if(action === 'encodeHTMLEntities') return value.replace(/[\u00A0-\u9999<>\&]/gim, function(i) { return '&#' + i.charCodeAt(0) + ';'; });      if(action === 'decodeHTMLEntities') return value.replace(/&#(\d+);/g, function(match, num) { return String.fromCharCode(num); });      if(action === 'encodeHTMLNamedEntities') return value.replace(/[\u00A0-\u9999<>\&]/gim, function(i) { return '&' + i + ';'; });      if(action === 'decodeHTMLNamedEntities') return value.replace(/&[^;]+;/g, function(match) { var el = document.createElement('div'); el.innerHTML = match; return el.innerText; });      return value;    }    value = applyAction(value, action);    if(doubleEncode) value = applyAction(value, action);    output.value = value;  };  view.appendChild(applyButton);  document.body.appendChild(view);})();
